1Ô∏è‚É£ GenerateDraginoRules ‚Äì build rules from documentation
URL
POST /api/GenerateDraginoRules
Content-Type: application/json

Request body (JSON)
{
  "documentation": "Full Dragino sensor documentation here...",
  "sensorSpecificPrompt": "Optional extra hints or overrides..."
}


documentation (string, required):
The full device doc / message format / examples you want to feed to OpenAI.

sensorSpecificPrompt (string, optional):
Extra hints, corrections, or device-specific notes. Can be omitted or null.

If:

Body is empty ‚Üí 400 "Request body is empty."

JSON is invalid ‚Üí 400 "Invalid JSON."

documentation is missing or empty ‚Üí 400 "Field 'documentation' is required."

Successful response (200)
{
  "rulesBlock": "DRAGINO_RULES {\n  ...\n}"
}


rulesBlock (string): the full rules block generated by DraginoOpenAiHelper.GenerateDecodingRulesAsync.

Error responses

400 ‚Äì bad request

{
  "error": "Request body is empty."
}


or

{
  "error": "Invalid JSON.",
  "details": "The JSON parser error message..."
}


or

{
  "error": "Field 'documentation' is required."
}


500 ‚Äì internal error

{
  "error": "Some technical message from DraginoOpenAiHelper or other exception."
}

2Ô∏è‚É£ GenerateDraginoDecoder ‚Äì build decoder code from rules
URL
POST /api/GenerateDraginoDecoder
Content-Type: application/json

Request body (JSON)
{
  "rulesBlock": "DRAGINO_RULES {\n  ...\n}"
}


rulesBlock (string, required):
The exact rules block returned from GenerateDraginoRules (or manually written/edited).

If:

Body is empty ‚Üí 400 "Request body is empty."

JSON is invalid ‚Üí 400 "Invalid JSON."

rulesBlock missing or empty ‚Üí 400 "Field 'rulesBlock' is required."

Successful response (200)
{
  "decoderCode": "public static class DraginoDecoder {\n    ...\n}"
}


decoderCode (string): full C# decoder code from DraginoOpenAiHelper.GenerateDecoderCodeAsync.

Error responses

400 ‚Äì bad request

{
  "error": "Request body is empty."
}


or

{
  "error": "Invalid JSON.",
  "details": "The JSON parser error message..."
}


or

{
  "error": "Field 'rulesBlock' is required."
}


500 ‚Äì internal error

{
  "error": "Some technical message from DraginoOpenAiHelper or other exception."
}

üë£ Suggested frontend / agent flow

Step 1 ‚Äì generate rules

Call POST /api/GenerateDraginoRules with:

{
  "documentation": "‚Ä¶",
  "sensorSpecificPrompt": "‚Ä¶" // optional
}


Read rulesBlock from the response.

Step 2 ‚Äì generate decoder

Call POST /api/GenerateDraginoDecoder with:

{
  "rulesBlock": "<rulesBlock from step 1>"
}


Read decoderCode from the response and show/save it.